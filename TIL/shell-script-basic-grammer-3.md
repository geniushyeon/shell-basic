# 쉘 스크립트 기초 문법(3) - 연산자

## 1. 연산자
쉘 스크립트의 대부분의 문법에서 조건식을 만들기 위해 사용
- 변수의 데이터 타입, 혹은 사용하는 문법에 따라 달라질 수 있다.
### 1.1. 문자열 연산자
변수의 데이터 타입이 문자열인 경우 주로 사용되는 연산자<br/>
해당 연산자와 함께 사용하면 변수에 어떤 값이 저장되든 모두 문자열로 취급한다.
|연산자|사용법|설명|
|-|-|-|
|-z|if [ -z $변수 ]|문자열의 길이가 0이면 참|
|-n|if [ -n $변수 ]|문자열의 길이가 0이 아니면 참|
#### 1.1.1. 문자열 변수가 null값인지 체크
변수가 초기화되었는지 여부를 체크할 때 -z 연산자를 유용하게 사용할 수 있다.
```bash
#!/bin/bash

if [ -z $1 ]
then
  echo True
else
  echo False
fi

$ sh operator-example.sh
True
$ sh operator-example.sh test
False
```
#### 1.1.2. 문자열 변수에 문자열이 저장되었는지 체크
-n 연산자: 문자열의 길이가 0보다 크면 True 리턴
```bash
#!/bin/bash

if [ -n $1 ]
then
  echo True
else
  echo False
fi

$ sh operator-example2.sh
True # 책 내용대로면 False여야 하는데..
$ sh operator-example2.sh test
True # ????
```
### 1.2. 비교 연산자
#### 1.2.1. 정수 비교 연산자
|연산자|사용법|설명|
|-|-|-|
|-eq|if [ $변수1 -eq $변수2 ]|변수1과 변수2의 값이 같으면 참|
|-ne|if [ $변수1 -ne $변수2 ]|변수1과 변수2의 값이 다르면 참|
|-gt|if [ $변수1 -gt $변수2 ]|변수1이 변수2보다 크면 참|
|-ge|if [ $변수1 -ge $변수2 ]|변수1이 변수2보다 크거나 같으면 참|
|-lt|if [ $변수1 -lt $변수2 ]|변수1이 변수2보다 작으면 참|
|-le|if [ $변수1 -le $변수2 ]|변수1이 변수2보다 작거나 같으면 참|
|>|if (( $변수1 > $변수2 ))|중첩소괄호 사용해야 함|
|<|if (( $변수1 < $변수2 ))|중첩소괄호 사용해야 함|
|>=|if (( $변수1 >= $변수2 ))|중첩소괄호 사용해야 함|
|<=|if (( $변수1 <= $변수2 ))|중첩소괄호 사용해야 함|
#### 1.2.2. 문자열 비교 연산자
문자열을 비교할 때는 문자형 연산자를 사용하지 않고 기호 연산자만 사용 가능<br/>
-> 문자열 비교 시 비교 연산자도 문자로 되어 있으면 휴먼 에러가 발생할 확률이 높기 때문
|연산자|사용법|설명|
|-|-|-|
|=|if [ $변수1 = $변수2 ]|각 변수의 값이 같으면 참, 동일한 문자열일 경우 참|
|==|if [ $변수1 == $변수2 ]|각 변수의 값이 같으면 참, 동일한 문자열일 경우 참|
|!=|if [ $변수1 != $변수2 ]|각 변수의 값이 다르면 참, 서로 다른 문자열일 경우 참|
|>|if [[ $변수1 > $변수2 ]]|변수1의 ASCII 코드 값이 변수2보다 크면 참|
|<|if [[ $변수1 < $변수2 ]]|변수1의 ASCII 코드 값이 변수2보다 작으면 참|
#### 1.3. 논리 연산자
```text
-a == &&(AND 연산)
-o == ||(OR 연산)
```
사용방법
```bash
if [ 조건식1 -a 조건식2 ]
if [ 조건식1 -o 조건식2 ]
if [ 조건식1 ] && [ 조건식2 ]
if [[ 조건식1 && 조건식2 ]]
if [ 조건식1 ] || [ 조건식2 ]
if [[ 조건식1 || 조건식2 ]]
```
- 예제1) AND, OR 연산 - 문자형 연산자
```bash
$ VAR1=10; VAR2=20; VAR3=30
# VAR1이 VAR2보다 작고, VAR2가 VAR3보다 작으면 True, 아니면 False 출력
$ if [ $VAR1 -lt $VAR2 -a $VAR2 -gt $VAR3 ]; then echo True; else echo False; fi
False
# VAR1이 VAR2보다 작거나, VAR2가 VAR3보다 작으면 True, 아니면 False 출력
$ if [ $VAR1 -lt $VAR2 -o $VAR2 -gt $VAR3 ]; then echo True; else echo False; fi
True
```
- 예제2) AND, OR 연산 - 조건식도 기호 연산자 사용
```bash
$ VAR1=10; VAR2=20; VAR3=30
$ if (( $VAR1 < $VAR2 )) && (( $VAR2 > $VAR3 )); then echo True; else echo False; fi
False
$ if (( $VAR1 < $VAR2 )) || (( $VAR2 > $VAR3 )); then echo True; else echo False; fi
True
```
### 1.4. 디렉터리 연산자
변수 유형이 디렉터리일 경우 사용할 수 있는 연산자. 특정 디렉터리 내의 파일 목록 중 디렉터리가 있는지를 체크할 경우, 디렉터리 내에 디렉터리나 파일이 있는지 확인할 경우 사용 가능
|연산자|사용법|설명|
|-|-|-|
|-d|if [ -d $변수 ]|변수 유형이 디렉터리이면 참|
|-e|if [ -e $변수 ]|변수 유형이 디렉터리이거나 파일이면 참|
### 1.5. 파일 연산자
파일이 가지고 있는 다양한 속성들을 체크하는 연산자
|연산자|설명|
|-|-|
|-f|변수 유형이 파일이면 참|
|-L|변수 유형이 파일이면서 심볼릭 링크이면 참|
|-r|변수 유형이 파일이거나 디렉터리이면서 읽기 권한이 있으면 참|
|-w|변수 유형이 파일이거나 디렉터리이면서 쓰기 권한이 있으면 참|
|-x|변수 유형이 파일이거나 디렉터리이면서 실행 권한이 있으면 참|
|-s|변수 유형이 파일이거나 디렉터리이면서 사이즈가 0보다 크면 참|
|-O|변수 유형이 파일이거나 디렉터리이면서 스크립트 실행 소유자와 동일하면 참|
|-G|변수 유형이 파일이거나 디렉터리이면서 스크립트 실행 그룹과 동일하면 참|
### 1.6. 파일 비교 연산자
두 개의 변수에 정의된 파일을 비교하는 연산자. 어떤 파일이 더 최근에 생성된 것인지, 어떤 파일이 더 오래된 파일인지 확인 가능
|연산자|설명|
|연산자|사용법|설명|
|-|-|-|
|-nt|if [ $변수1 -nt $변수2 ]|변수 유형이 파일이면서, 변수1이 변수2보다 최신 파일이면 참|
|-ot|if [ $변수1 -ot $변수2 ]|변수 유형이 파일이면서, 변수1이 변수2보다 이전 파일이면 참|
|-ef|if [ $변수1 -ef $변수2 ]|변수 유형이 파일이면서, 변수1과 변수2가 동일한 파일이면 참|
- 예제
```bash
# 서로 다른 문자열을 각각의 파일로 생성
$ echo "file1" > file1.txt
$ echo "file2" > file2.txt
# 생성한 파일을 각각의 변수에 저장
$ FILE1=file1.txt; FILE2=file2.txt
$ if [ $FILE1 -nt $FILE2 ]; then echo True; else echo False; fi
False
$ if [ $FILE1 -ot $FILE2 ]; then echo True; else echo False; fi
True
# 심볼릭 링크로 연결된 두 개의 파일명을 각각의 변수에 저장
$ FILE1=/etc/localtime
$ FILE2=/usr/share/zoneinfo/Asia/Seoul
$ if [ $FILE -ef $FILE2 ]; then echo True; else echo False; fi
True
```